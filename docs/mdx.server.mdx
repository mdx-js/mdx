import {Editor} from './_component/editor.client.js'
export const navSortSelf = 1

# What is MDX?

## Contents

*   [Markdown for the component era](#markdown-for-the-component-era)
*   [MDX syntax](#mdx-syntax)
    *   [Markdown](#markdown)
    *   [JSX](#jsx)
    *   [ESM](#esm)
    *   [Expressions](#expressions)
*   [MDX content](#mdx-content)
    *   [Components](#components)
    *   [Layout](#layout)

## Markdown for the component era

MDX is exciting because it‚Äôs an authorable format that lets you seamlessly write
JSX in your Markdown documents.
You can import components, such as interactive charts or alerts, and embed them
within your content.
This makes writing long-form content with components a blast.
üöÄ

More practically MDX can be explained as a format that combines markdown with
JSX and looks as follows:

```mdx
# Hello, world!

<div className="note">
  > Some notable things in a block quote!
</div>
```

The heading and the block quote are markdown and those XML-like things are JSX
instead of HTML.

This example uses `className` on the `<div>`.
That‚Äôs because this example was written with React in mind which expects classes
to be added as such.
Other frameworks, such as Vue and Preact, expect classes to be defined
differently, so note that there are some differences in how JSX has to be
authored depending on what framework it‚Äôs used with.

A few other things from JavaScript are supported as well: expressions in braces
(such as `{1 + 1}`) and ESM (`import` and `export`).

See [¬ß MDX syntax][mdx-syntax] below for more on how the format works and what
else is and isn‚Äôt supported.
See [¬ß MDX content][mdx-content] below for more on what the format compiles to.
See [¬ß Playground][playground] to try it out live in your browser.

## MDX syntax

> **Note**!
> You don‚Äôt have to use this syntax.
> Or use it always.
> With [`options.format`][format], you can opt-in gradually or not at all.

The MDX syntax is a mix between markdown and JSX.
Markdown often feels more natural to type than HTML (or JSX) for the common
things (like emphasis, headings).
JSX is an extension to JavaScript that *looks* like HTML but makes it convenient
to use components (reusable things).
See [this description in
`micromark/mdx-state-machine`](https://github.com/micromark/mdx-state-machine#71-syntax)
for a formal description of the syntax.

This gives us something along the lines of [literate programming][lit].

MDX also gives us an odd mix of two languages: markdown is whitespace sensitive
and forgiving (what you type may not ‚Äúwork‚Äù but it won‚Äôt crash) whereas
JavaScript is whitespace **insensitive** and **does** crash on typos.
Weirdly enough they combine pretty well!

It‚Äôs important to know markdown
([see this cheatsheet and tutorial](https://commonmark.org/help/) for help)
and have experience with JavaScript (specifically
[JSX](https://facebook.github.io/jsx/)) to write (and enjoy writing) MDX.

Some common gotchas with writing MDX are
[documented here in `micromark/mdx-state-machine`
](https://github.com/micromark/mdx-state-machine#74-common-mdx-gotchas).

### Markdown

Most of markdown ([CommonMark][]) works:

````mdx
# Heading (rank 1)
## Heading 2
### 3
#### 4
##### 5
###### 6

> Block quote

* Unordered
* List

1. Ordered
2. List

A paragraph, introducing a thematic break:

---

```js
some.code()
```

a [link](https://example.com), an ![image](./image.png), some *emphasis*,
something **strong**, and finally a little `code()`.
````

Some other features often used with markdown are:

*   **GFM** ‚Äî autolink literals, strikethrough, tables, tasklists
    ([see guide on how to use `remark-gfm`](#))
*   **Frontmatter** ‚Äî YAML
    ([see guide on how to use `remark-frontmatter`](#))
*   **Footnotes**
    ([see guide on how to use `remark-footnotes`](#))
*   **Math**
    ([see guide on how to use `remark-math` and `rehype-katex`](#))
*   **Syntax highlighting**
    ([see guide on how to use `rehype-highlight`](#))

There are many more things possible by configuring
[remark plugins][remark-plugins] and [rehype plugins][rehype-plugins].

There are also a couple specific remark/rehype/recma plugins that work with
MDX: see [plugins](#).

#### Caveats

Some markdown features don‚Äôt work in MDX:

```mdx
Indented code works in markdown, but not in MDX:

    console.log(1) // this is a paragraph in MDX!

The reason for that is so that you can nicely indent your components.

A different one is ‚Äúautolinks‚Äù:

<svg:rect> and <admin@example.com> are links in markdown, but they crash
`mdx-js/mdx`.
The reason is that they look a lot like JSX components, and we prefer being unambiguous.
If you want links, use [descriptive text](https://and-the-link-here.com).

HTML doesn‚Äôt work, because MDX has JSX instead (see next section).

And you must escape less than (`<`) and opening braces (`{`) like so: \< or \{.
```

More on this is
[documented here](https://github.com/micromark/mdx-state-machine#72-deviations-from-markdown).

### JSX

Most of JSX works.
Here‚Äôs some that looks a lot like HTML (but is JSX):

```js
<h1>Heading!</h1>

<abbr title="HyperText Markup Language">HTML</abbr> is a lovely language.

<section>
  And here is *markdown* in **JSX**!
</section>
```

You can also use components, but note that you must either define them locally
or pass them in later (see [¬ß MDX content][mdx-content]):

```js
<MyComponent id="123" />

Or access the `thisOne` component on the `myComponents` object: <myComponents.thisOne />

<Component
  open
  x={1}
  label={'this is a string, *not* markdown!'}
  icon={<Icon />}
/>
```

More on this is
[documented here](https://github.com/micromark/mdx-state-machine#73-deviations-from-jsx).

### ESM

To define things from within MDX, use ESM:

```js
import {External} from './some/place.js'

export const Local = props => <span style={{color: 'red'}} {...props} />

An <External /> component and <Local>a local component</Local>.
```

ESM can also be used for other things:

```js
import {MyChart} from './chart-component.js'
import data from './population.js'
export const pi = 3.14

<MyChart data={data} label={'Something with ' + pi} />
```

### Expressions

Braces can be used to embed JavaScript expressions in MDX:

```mdx
export const pi = 3.14

Two üç∞ is: {pi * 2}
```

Expressions can be empty or contain just a comment:

```mdx
{/* A comment! */}
```

## MDX content

All content (headings, paragraphs, etc) you write are exported as the default
export from a compiled MDX file as a component.

It‚Äôs possible to pass props in.
The special prop `components` is used to determine how to render components.
This includes both JSX and markdown syntax.
Say we have a `message.mdx` file:

```mdx
# Hello, *<Planet />*!

Remember when we first met in {props.year}?
```

This file could be imported from JavaScript and passed components like so:

```js
import Message from './message.mdx' // Assumes an integration is used to compile MDX -> JS.

<Message components={{Planet: () => 'Venus'}} year={1962} />
```

You can also change the things that come from markdown:

```js
<Message
  components={{
    // Map `h1` (`# heading`) to use `h2`s.
    h1: 'h2',
    // Rewrite `em`s (`*like so*`) to `i` with a red foreground color.
    em: (props) => <i style={{color: 'red'}} {...props} />,
    // Pass a layout (using the special `'wrapper'` key).
    wrapper: ({components, ...props}) => <main {...props} />,
    // Pass a component.
    Planet: () => 'Venus'
  }}
  year={1962}
/>
```

### Components

The following keys can be passed in `components`:

*   HTML equivalents for the things you write with markdown (such as `h1` for
    `# heading`)**‚Ä†**
*   `wrapper`, which defines the layout (but local layout takes precedence)
*   `*` anything else that is a valid JavaScript identifier (`foo`,
    `Components`, `_`, `$x`, `a1`) for the things you write with JSX (like
    `<So />` or `<like.so />`, note that locally defined components take
    precedence)**‚Ä°**

**‚Ä†** Normally, in markdown, those are: `a`, `blockquote`, `code`, `em`, `h1`,
`h2`, `h3`, `h4`, `h5`, `h6`, `hr`, `img`, `li`, `ol`, `p`, `pre`, `strong`, and
`ul`.
With [`remark-gfm`][gfm] ([see guide](#)), you can also use: `del`, `table`,
`tbody`, `td`, `th`, `thead`, and `tr`.
Other remark plugins that add support for new constructs and advertise that they
work with rehype, will also work with **xdm**.

**‚Ä°** The rules for whether a name in JSX (`x` in `<x>`) is a literal tag name
or not, are as follows:

*   If there‚Äôs a dot, it‚Äôs a member expression (`<a.b>` -> `h(a.b)`)
*   Otherwise, if the name is not a valid identifier, it‚Äôs a literal (`<a-b>` ->
    `h('a-b')`)
*   Otherwise, if it starts with a lowercase, it‚Äôs a literal (`<a>` -> `h('a')`)
*   Otherwise, it‚Äôs an identifier (`<A>` -> `h(A)`)

### Layout

Layouts are components that wrap the whole content.
They can be defined from within MDX using a default export:

```js
export default function Layout({children}) {
  return <main>{children}</main>;
}

All the things.
```

The layout can also be imported and *then* exported with an `export ‚Ä¶ from`:

```js
export {Layout as default} from './components.js'
```

The layout can also be passed as `components.wrapper` (but a local one takes
precedence).

[lit]: https://en.wikipedia.org/wiki/Literate_programming

[commonmark]: https://commonmark.org

[remark-plugins]: https://github.com/remarkjs/remark/blob/main/doc/plugins.md#list-of-plugins

[rehype-plugins]: https://github.com/rehypejs/rehype/blob/main/doc/plugins.md#list-of-plugins

[gfm]: https://github.com/remarkjs/remark-gfm

[format]: /packages/mdx/#optionsformat

[playground]: /playground/

[mdx-syntax]: #mdx-syntax

[mdx-content]: #mdx-content
